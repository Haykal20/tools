<div id="ai-tool-view" class="flex flex-col h-screen bg-gray-900">
     <header class="bg-gray-800/50 backdrop-blur-sm border-b border-gray-700 p-4 shadow-md flex items-center justify-between">
        <button class="back-to-selection-btn bg-slate-700 hover:bg-slate-600 p-2 rounded-full transition">
            <i data-lucide="arrow-left" class="w-5 h-5 text-white"></i>
        </button>
        <div class="text-center">
            <h1 class="text-xl font-bold text-white tracking-wider">Haykal AI</h1>
             <select id="model-selector" class="bg-gray-700 border border-gray-600 text-white text-xs rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-1.5 transition mt-1">
                <option value="deepseek/deepseek-chat-v3.1:free" selected>Deepseek Chat v3.1</option>
                <option value="qwen/qwen3-4b:free">Qwen 3.5 4B</option>
            </select>
        </div>
        <button id="clear-chat-btn" class="bg-slate-700 hover:bg-slate-600 p-2 rounded-full transition" title="Hapus Riwayat Chat">
            <i data-lucide="trash-2" class="w-5 h-5 text-white"></i>
        </button>
    </header>

    <main id="chat-container" class="flex-1 overflow-y-auto p-4 md:p-6 space-y-6 custom-scrollbar"></main>
    
    <div id="loading-indicator" class="chat-loading-fixed hidden">
        <div class="flex items-center gap-3">
            <div class="bg-gray-700 p-2 rounded-full"><i data-lucide="bot" class="text-teal-400"></i></div>
            <div class="bg-gray-800 rounded-lg p-3 flex items-center shadow">
                <div class="typing-indicator">
                    <div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="p-4 md:p-6 bg-gray-900 border-t border-gray-700">
        <div class="max-w-3xl mx-auto">
            <form id="chat-form" class="flex items-center gap-3">
                <input type="text" id="user-input" placeholder="Ketik pesan Anda di sini..." autocomplete="off" class="flex-1 bg-gray-800 border border-gray-700 rounded-full px-5 py-3 text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-500 transition duration-300">
                <button type="submit" class="bg-teal-600 hover:bg-teal-500 text-white rounded-full p-3 flex items-center justify-center transition duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-teal-500 disabled:bg-gray-600 disabled:cursor-not-allowed">
                    <i data-lucide="send-horizontal" class="w-5 h-5"></i>
                </button>
            </form>
        </div>
    </footer>
</div>

<div id="model-change-modal" class="hidden fixed inset-0 bg-black/60 items-center justify-center p-4 z-50">
     <div class="bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm border border-gray-700">
        <div class="text-center"><div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-900/50"><i data-lucide="alert-triangle" class="h-6 w-6 text-yellow-400"></i></div><h3 class="mt-4 text-lg font-medium text-white">Ganti Model?</h3><p class="mt-2 text-sm text-gray-400">Riwayat percakapan saat ini akan dihapus. Anda yakin ingin melanjutkan?</p></div>
        <div class="mt-6 flex justify-end gap-3"><button id="cancel-change-btn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm font-medium rounded-md transition">Batal</button><button id="confirm-change-btn" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition">Ya, Lanjutkan</button></div>
    </div>
</div>

<div id="clear-chat-modal" class="hidden fixed inset-0 bg-black/60 items-center justify-center p-4 z-50">
     <div class="bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm border border-gray-700">
        <div class="text-center"><div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-900/50"><i data-lucide="trash-2" class="h-6 w-6 text-red-400"></i></div><h3 class="mt-4 text-lg font-medium text-white">Hapus Percakapan?</h3><p class="mt-2 text-sm text-gray-400">Semua riwayat percakapan akan dihapus permanen. Aksi ini tidak bisa dibatalkan.</p></div>
        <div class="mt-6 flex justify-end gap-3"><button id="cancel-clear-btn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm font-medium rounded-md transition">Batal</button><button id="confirm-clear-btn" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition">Ya, Hapus</button></div>
    </div>
</div>